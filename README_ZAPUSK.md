# Как запустить проект

## Что нужно понимать

**База данных** - это хранилище данных (пользователи, продукты, тренировки).
У вас уже есть БД `fitness_baze` в pgAdmin, но она пустая.

**schema.sql** - это SQL-скрипт который СОЗДАЕТ таблицы в вашей БД.
Выполнить его нужно ОДИН РАЗ.

**Backend** - это сервер Node.js который работает с БД и отдает данные приложению.

**Frontend** - это Flutter приложение (интерфейс) на ПК или телефоне.

## Пошаговый запуск

### 1. Создать таблицы в БД (ОДИН РАЗ)

Зачем: чтобы БД знала какие данные хранить

Как:
1. Откройте pgAdmin
2. Найдите слева в дереве `fitness_baze`
3. Правая кнопка → Query Tool
4. В окне Query Tool: File → Open → выберите файл `database/schema.sql` из проекта
5. Нажмите кнопку Execute (▶️ треугольник)
6. Внизу должно появиться "Query returned successfully"

Проверка что таблицы созданы:
```sql
SELECT tablename FROM pg_tables WHERE schemaname = 'public';
```
Должно показать список таблиц: users, products, exercises и т.д.

### 2. Запустить Backend (каждый раз)

Откройте терминал в папке проекта:

```bash
cd backend
npm run dev
```

Увидите:
```
FitPilot Backend запущен на порту 3000
Подключено к базе данных PostgreSQL
```

Проверка: откройте браузер → http://localhost:3000
Должен показать JSON с версией API

### 3. Запустить приложение

#### На ПК (Windows):

```bash
cd frontend
flutter run -d windows
```

Откроется окно приложения.

#### На телефоне (Android):

1. Подключите телефон по USB
2. Включите отладку по USB в настройках разработчика
3. Проверьте что телефон виден:
   ```bash
   flutter devices
   ```
4. **ВАЖНО:** Измените IP в коде!
   
   Откройте файл: `frontend/lib/services/api_service.dart`
   
   Строка 7:
   ```dart
   static const String baseUrl = 'http://localhost:3000/api';
   ```
   
   Измените на:
   ```dart
   static const String baseUrl = 'http://192.168.X.X:3000/api';
   ```
   
   Где 192.168.X.X - это IP вашего компьютера в локальной сети.
   
   Узнать IP:
   ```bash
   ipconfig
   ```
   Найдите строку IPv4: 192.168.X.X

5. Запустите:
   ```bash
   flutter run
   ```

Приложение установится на телефон.

## Частые проблемы

### "Cannot connect to database"

Проблема: Backend не может подключиться к PostgreSQL

Решение:
1. Проверьте что PostgreSQL запущен
2. Откройте `backend/.env`
3. Проверьте пароль:
   ```
   DB_PASSWORD=ваш_пароль_от_postgres
   ```

### "relation users does not exist"

Проблема: таблицы не созданы в БД

Решение: выполните ШАГ 1 (schema.sql в pgAdmin)

### "No devices found"

Проблема: Flutter не видит устройства

Решение:
```bash
flutter doctor
flutter devices
```

Для телефона: включите отладку по USB в настройках

### "Connection refused" на телефоне

Проблема: телефон не может подключиться к серверу на ПК

Решение:
1. Убедитесь что ПК и телефон в одной WiFi сети
2. Измените IP в `api_service.dart` (см. ШАГ 3)
3. Проверьте что фаервол Windows не блокирует порт 3000

## Expo Go - НЕ НУЖЕН

У вас Flutter проект, не React Native.
Expo Go используется только для React Native.
Удалите его с телефона если установили.

Flutter компилирует нативное приложение и не требует дополнительных программ.

## Структура запуска

```
┌─────────────┐
│   pgAdmin   │  ← Один раз выполнить schema.sql
│ fitness_baze│
└──────┬──────┘
       │
       ↓
┌─────────────┐
│   Backend   │  ← npm run dev (Node.js сервер)
│ localhost   │
│   :3000     │
└──────┬──────┘
       │
       ↓
┌─────────────┐
│  Frontend   │  ← flutter run (приложение)
│   Flutter   │
└─────────────┘
```

## Готово

После выполнения всех шагов:
- Backend работает на http://localhost:3000
- Приложение открыто на ПК или телефоне
- Можно регистрироваться и пользоваться

Первый запуск: создайте аккаунт через экран регистрации в приложении.
