# FoodShop - Интернет-магазин продуктов питания

Полнофункциональный интернет-магазин продуктов питания, разработанный на React.js с backend на Node.js и PostgreSQL.

## Реализованный функционал

### Интерфейс авторизации и регистрации

Создана полноценная система аутентификации пользователей:

- **Страница регистрации** (`/register`) с валидацией полей в реальном времени
- **Страница авторизации** (`/login`) с современным дизайном
- Валидация email, проверка сложности пароля
- Подтверждение пароля при регистрации
- Автоматическое заполнение данных для авторизованных пользователей
- Сохранение сессии через JWT токены в localStorage

### API интеграция

#### a. Вывод товаров

Реализована система загрузки товаров с сервера:

- API endpoint `/api/products/categories/grouped` для получения товаров по категориям
- Группировка товаров: акции, новинки, популярные
- Fallback на локальные данные при недоступности сервера
- Моковые данные для демонстрации при пустой базе данных
- Обработка ошибок загрузки с возможностью повторного запроса

#### b. Регистрация/авторизация

Полная интеграция с backend API:

- Endpoints `/api/auth/register` и `/api/auth/login`
- JWT токены для авторизации
- Middleware для проверки авторизации на защищенных маршрутах
- Автоматическое обновление состояния авторизации в приложении
- Безопасное хранение токенов и данных пользователя

#### c. Добавление и вывод новостей

Система управления новостями:

- Просмотр новостей доступен всем пользователям
- Добавление новостей только для авторизованных пользователей
- API endpoints `/api/news` (GET, POST)
- Валидация данных на клиенте и сервере
- Автоматическое обновление списка после добавления новости
- Отображение автора и даты создания новости

### Страница оформления заказов

Разработана полноценная система оформления заказов:

- **Форма заказа** с валидацией всех полей
- **Контактные данные**: имя, фамилия, email, телефон
- **Адрес доставки**: выбор способа доставки (курьер/самовывоз)
- **Способ оплаты**: банковская карта или наличные при получении
- **Сводка заказа** с подсчетом стоимости доставки
- **Страница успешного оформления** заказа
- Интеграция с корзиной товаров
- Сохранение заказов в базе данных PostgreSQL

## Техническая реализация

### Frontend (React.js)

- Современный UI с использованием CSS Grid и Flexbox
- Адаптивный дизайн для всех устройств
- Валидация форм в реальном времени
- Управление состоянием через Context API
- Роутинг с React Router
- Обработка ошибок и loading состояний

### Backend (Node.js + Express)

- RESTful API с полной документацией
- JWT аутентификация
- Валидация данных на сервере
- CORS настройки для работы с frontend
- Rate limiting для защиты от спама
- Подробное логирование запросов

### База данных (PostgreSQL)

- Таблицы: users, news, orders, order_items
- Связи между таблицами с внешними ключами
- Индексы для оптимизации запросов
- Триггеры для автоматического обновления timestamps
- Транзакции для целостности данных при создании заказов

## Структура проекта

```
project_shop/
├── frontend/
│   ├── public/
│   │   └── index.html
│   └── src/
│       ├── components/          # React компоненты
│       │   ├── AuthForm/        # Компоненты авторизации
│       │   ├── Cart/            # Корзина товаров
│       │   ├── Header/          # Шапка сайта
│       │   └── ...
│       ├── pages/               # Страницы приложения
│       │   ├── Login.js         # Страница входа
│       │   ├── Register.js      # Страница регистрации
│       │   ├── News.js          # Страница новостей
│       │   ├── Checkout.js      # Оформление заказа
│       │   └── Home.js          # Главная страница
│       ├── context/             # Context API
│       │   ├── AuthContext.js   # Контекст авторизации
│       │   └── CartContext.js   # Контекст корзины
│       ├── services/            # API клиенты
│       │   └── api.js           # HTTP запросы к серверу
│       ├── hooks/               # Пользовательские хуки
│       │   └── useFormValidation.js
│       └── utils/               # Утилиты
│           └── priceUtils.js    # Работа с ценами
├── backend/
│   ├── routes/                  # API маршруты
│   │   ├── auth.js              # Авторизация
│   │   ├── news.js              # Новости
│   │   ├── orders.js            # Заказы
│   │   └── products.js          # Товары
│   ├── middleware/              # Middleware
│   │   └── auth.js              # Проверка JWT токенов
│   ├── config/                  # Конфигурация
│   │   └── database.js          # Подключение к PostgreSQL
│   └── database/                # SQL скрипты
│       └── create_orders_tables.sql
├── backend/package.json
├── frontend/package.json
└── package.json
```

## Установка и запуск

1. Установка зависимостей (корень, backend, frontend):
```bash
npm run install:all
```

2. Настройка базы данных PostgreSQL и выполнение SQL скриптов

3. Настройка переменных окружения:
- `backend/.env` — параметры БД, JWT и порт (по умолчанию `PORT=4000`)
- `frontend/.env` — например: `REACT_APP_API_URL=http://localhost:4000`

4. Запуск в режиме разработки (одновременно backend и frontend):
```bash
npm run dev
```

Альтернативно:
```bash
# Только backend (dev с nodemon)
npm run dev:backend

# Только frontend (CRA на :3000)
npm run start:frontend

# Сборка фронтенда
npm run build:frontend
```

## Особенности реализации

- Безопасная работа с ценами через утилиты priceUtils
- Детальная валидация форм с показом ошибок в реальном времени
- Обработка всех возможных состояний загрузки и ошибок
- Современный дизайн с градиентами и анимациями
- Полная адаптивность для мобильных устройств
- Оптимизированные SQL запросы с индексами
- Транзакционная целостность при создании заказов

Приложение готово к продакшену и может быть развернуто на любом хостинге с поддержкой Node.js и PostgreSQL.

## Изменения (17.10.2025)

- **Поиск**: добавлены подсказки (до 6 элементов, кнопка «Показать все»), страница результатов с фильтрами, сортировками и пагинацией.
- **Каталог**: выпадающая сетка категорий при ховере, кликабельные пункты, устойчивое поведение при наведении.
- **Категории**: страница `'/category/:name'` с фильтрами (цена/новинки/скидки), сортировкой и пагинацией.
- **Товар**: страница `'/product/:id'` с ценой, рейтингом, описанием и блоком «С этим товаром покупают».
- **Избранное**: сердечко на карточке (toggle), страница `'/favorites'`, хранение в `localStorage`.
- **Статика**: страницы `'/about'`, `'/contacts'`, `'/vacancies'`; обновлены ссылки в футере.
- **API**: добавлены `GET /api/products/search`, `GET /api/products/suggest`, `GET /api/products/by-ids`, `GET /api/products/related/:id`; расширен `GET /api/products` фильтрами и сортировкой.
